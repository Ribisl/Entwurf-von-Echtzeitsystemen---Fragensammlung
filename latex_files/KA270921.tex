\section{Prüfung 27.09.2021}
\subsection{Echtzeit}
\subsubsection{a)}
Ein Profit/Penalty-Diagramm gibt den Nutzen bzw. den Schaden der Ausführung einer Operation als
kontinuierlichen Zahlenwert in Abhängigkeit vom Zeitpunkt der Ausführung an. Positive Werte
bedeuten einen Nutzen, negative einen Schaden – je größer der Absolutwert, desto größer der Nutzen
bzw. der Schaden.
Beim Profibus-Protokoll IRT bekommt jeder von drei Teilnehmern reihum („round robin“) einen
Zeitschlitz mit einer Dauer von jeweils 20 ms zugewiesen in dem nur dieser Teilnehmer senden darf,
danach folgt ein Zeitschlitz mit 10 ms Dauer wo alle Teilnehmer senden dürfen, dann die 20 ms
exklusive Sendezeit für den zweiten Teilnehmer, dann wieder 10 ms Sendezeit für alle usw. Zeichnen
Sie in das folgende Diagramm den Profit/Penalty-Verlauf für die Operation „Beginn des Sendens einer
Nachricht“ des ersten Teilnehmers ein, wobei das vollständige Übertragen der Nachricht 5 ms dauert
und der erste Zeitschlitz zum Zeitpunkt 0 ms beginnt.
\begin{figure}[H]
  \includegraphics[width=10cm]{images/KA270921/1a.PNG}
  \centering
\end{figure}

\subsubsection{b)}
Handelt es sich hier um weiche, feste oder harte Echtzeit? Begründen Sie!

Es handelt sich um harte Echtzeit. Wenn angenommen wird, dass eine fehlerhafte Übertragung z.B. ein Bremsmanöver
nicht durchführen lässt, könnte es zu der Zerstörung der Maschine kommen.

\subsection{Architektur, Plattformen und Vernetzung}
\subsubsection{a)}
Unter welchen Umständen würden Sie ein Triple-Modular Redundancy (TMR) System wählen statt
eines Standby-Kontrollsystem mit Reservekontroller?

TMR wird bevorzugt wenn eine höhere Ausfallsicherheit und hohe Verfügbarkeit erfordert wird.
Wenn eine einfache Lösung gefordert ist, kann auf ein Standby-Kontrollsystem mit Reservekontroller
umgestiegen werden.

\subsubsection{b)}
Unter welchen Umständen würden Sie sich für den Einsatz eines Digitalen Signalprozessors (DSP) statt
eines ASIC entscheiden?

An ASIC is a highly specialized device constructed for one specific purpose application only, very expensive.
DSPs können für verschiedenste Signalverarbeitungs Anwendungen verwendet werden und sind deshalb flexibler wie ASICs.

\subsubsection{c)}
Warum verwendet man in eingebetteten Echtzeitsystemen oftmals Spezialhardware anstatt PCs „von
der Stange“ einzusetzen?

PCs von der Stange sind normalerweise General Purpose Operating Systems welche nicht für die spezialisierten Anwendungen
und Anforderungen von Echtzeitsystem gebaut wurden. 

\subsubsection{d)}
Unter welchen Umständen würden Sie sich für den Einsatz eines CAN-Busses anstatt eines I2C-Busses
entscheiden?

Wird eine Nachricht von mehreren Empfängern benötigt, würde man CAN bevorzugen da dieser nicht wie I2C nur an eine 
bestimmte Addresse senden kann. Bei einem CAN Bus kann jeder der sich mit dem Frame Identifier indentifiziert vom Bus lesen.

\subsection{Echtzeit Scheduling}
\subsubsection{a)}
Gehen Sie von folgenden drei periodischen Tasks aus:\\
Task1 = (1; 2),\\
Task2 = (1; 4),\\
Task3 = (k; 8)\\
Ein Task ist als Taskj = (Cj; Tj) definiert, wobei Cj die Ausführungszeit (Worst-Case) von Task j und Tj die
Periode von Task j ist. Wir benutzen das Task-Modell aus der Vorlesung, d.h. für jeden Task ist die Periode
identisch mit der Deadline, die Ausführungszeiten der Tasks sind konstant und so weiter. Alle Tasks sind
gleichzeitig zum Zeitpunkt 0 ausführungsbereit.
Analysieren Sie (ohne Zeichnen), die Schedulebarkeit mit EDF in Abhängigkeit von k. Bitte geben Sie alle
Werte von k in der Tabelle an für die ein EDF Schedule auf keinen Fall / eventuell / auf jeden Fall existiert.
Begründen Sie Ihre Antwort!
\begin{figure}[H]
  \includegraphics[width=10cm]{images/KA270921/3a.PNG}
  \centering
\end{figure}
\subsection{Tasksynchronisation}
Gegeben seien die drei Tasks T1, T2 und T3 wie unten dargestellt. Die Tasks werden nur einmal
abgearbeitet und enden dann. Die Semaphoren haben zu Beginn folgende initiale Werte: S1=0, S2=1, S3=0.
Gehen Sie davon aus, dass der Scheduler nicht preemptiv ist, d.h. ein Task wird solange ausgeführt bis er
durch ein wait() suspendiert wird.
\begin{figure}[H]
  \includegraphics[width=10cm]{images/KA270921/4a.PNG}
  \centering
\end{figure}

\subsubsection{a)}
Geben Sie an in welcher Reihenfolge die Buchstaben ausgedruckt werden!

Unter der Annahme, dass T1, T2 und T3 im Round Robin verfahren gescheduled werden.

E, C, A, B, D


\subsubsection{b)}
Geben Sie die Werte der drei Semaphoren nach Ende der Abarbeitung der Tasks an!

\begin{itemize}
  \item T3: $S1 = 1$, $S2 = 1$, $S3 = 0$
  \item T1: $S1 = 0$, $S2 = 3$, $S3 = 0$
  \item T2: $S1 = 0$, $S2 = 1$, $S3 = 0$
\end{itemize}

\subsection{Spezifikationssprachen}
Zeichnen Sie einen StateChart für die Steuerung eines Scheibenwischers. Am Stellhebel können drei
Einstellungen vorgenommen werden: AUS (Scheibenwischer ausgeschaltet), LANGSAM (ein Wischvorgang
alle 30 Sekunden), SCHNELL (ein Wischvorgang alle 10 Sekunden). Dies sind die Eingabeereignisse der
Steuerung. Als Ausgabe soll die Steuerung WISCHEN zu jenen Zeitpunkten liefern wann der nächste
(einmalige) Wischvorgang ausgelöst werden soll.
Geben Sie wie bei StateCharts üblich die Namen aller Zustände an, markieren Sie Transitionen mit Eingaben
(bzw. Ereignissen) und Ausgaben, geben Sie die Startzustände an.

\begin{figure}[H]
  \includegraphics[width=10cm]{images/KA270921/5a.PNG}
  \centering
\end{figure}

\subsection{Speicherprogrammierbare Steuerung (SPS)}
Geben Sie zu folgendem Strukturierten Text eine Anweisungsliste und einen Kontaktplan an welche die
gleiche Funktion ausführen wie der Strukturierte Text:

\begin{lstlisting}
IF A AND NOT D THEN
  B := FALSE;
ELSE
  B := TRUE;
END_IF;
IF B OR C THEN
  E = TRUE;
ELSE
  E = FALSE;
END_IF;
\end{lstlisting}

\subsubsection{Anweisungsliste (AWL)}
Da es kein? ST NOT gibt invertieren wir die IF Abfrage zu $\neg A \lor B$, wenn dies eintritt
kann B gesetzt werden.
\begin{lstlisting}
  LDN A
  OR D
  ST B
  
  LD B
  OR C
  ST E
\end{lstlisting}

\subsubsection{Kontaktplan (KOP)}
\begin{figure}[H]
  \includegraphics[width=10cm]{images/KA270921/6a.PNG}
  \centering
\end{figure}